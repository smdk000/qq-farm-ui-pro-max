# FINAL: 蹲守偷菜功能开发总结

## 成果概述

我们已经成功为 QQ Farm Bot 实现了**蹲守偷菜机制**。该机制允许 Bot 不再拘泥于纯粹随机或定时的扫描触发，而是根据分析后精准得出的【作物成熟时间表】进行倒计时拦截操作，以抢占第一顺位偷取果实。

### 核心亮点

1. **提前预判与组装**：通过解析 `core/src/services/friend.js`，预先推算出4小时内将要成熟的作物时间与坐标，针对时间相近（误差<10s）的地块自动编组。
2. **多线程安全**：配合隔离的 `friendScheduler` 将精准的 `setTimemout` 限制作业放在指定时刻运行。重进入好友农场不影响主体轮询。
3. **动态延迟配置**：由于部分账号可能因“秒偷”受到风控或报错，允许用户在前端设置中设定 `1~60s` 的延迟再调用 `stealHarvest` 取果，极大增强了灵活性和真实感。
4. **全端透传链路**：在原有的 API 传输中增加了独立的 `stakeoutSteal` 对象结构，与常规 `automation` 字段进行分离，不增加 `store.js` 逻辑复杂度。

## 使用指引
前往前端面板 “配置” -> “偷菜设置” 页面。在右上角配置“蹲守记录”开关并录入秒级等待时间（推荐填写 3 - 5 秒）。

## 归档
此任务顺利完毕。
