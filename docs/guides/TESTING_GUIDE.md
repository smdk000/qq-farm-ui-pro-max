# QQ 农场智能助手 - 测试指南

## 📋 测试环境

当前运行环境：
- **服务地址**: http://localhost:3000
- **管理员账号**: admin / admin
- **运行状态**: ✅ 已启动

---

## 测试流程

### 一、基础功能测试

#### 1. 登录测试

**测试步骤**：
1. 打开浏览器访问 http://localhost:3000
2. 使用默认管理员账号登录
   - 用户名：`admin`
   - 密码：`admin`

**预期结果**：
- ✅ 成功登录到 Dashboard
- ✅ 显示用户信息卡片
- ✅ 显示"管理员"标识
- ✅ 可以看到所有菜单项（包括用户、卡密）

#### 2. 修改密码测试

**测试步骤**：
1. 在 Dashboard 用户信息卡片点击"改密码"
2. 输入旧密码：`admin`
3. 输入新密码：`test1234`
4. 确认新密码：`test1234`
5. 点击"确认修改"

**预期结果**：
- ✅ 密码修改成功提示
- ✅ 可以使用新密码登录

#### 3. 退出登录测试

**测试步骤**：
1. 点击用户信息卡片右上角的退出按钮
2. 确认退出

**预期结果**：
- ✅ 成功退出到登录页面
- ✅ Token 已清除

---

### 二、多用户系统测试

#### 1. 生成卡密测试（管理员）

**测试步骤**：
1. 使用管理员账号登录
2. 点击侧边栏"卡密"菜单
3. 点击"生成卡密"按钮
4. 填写信息：
   - 描述：测试月卡
   - 类型：月卡 (M)
   - 天数：30
   - 数量：5
5. 点击"生成"

**预期结果**：
- ✅ 成功生成 5 个卡密
- ✅ 卡密显示在列表中
- ✅ 可以复制卡密
- ✅ 卡密状态为"启用"、"未使用"

**测试卡密示例**：
```
记录生成的卡密代码，用于后续测试
```

#### 2. 用户注册测试

**测试步骤**：
1. 退出管理员账号
2. 在登录页面切换到"注册"标签
3. 填写信息：
   - 用户名：`testuser1`
   - 密码：`test1234`
   - 卡密：使用上一步生成的卡密
4. 点击"注册并登录"

**预期结果**：
- ✅ 注册成功并自动登录
- ✅ Dashboard 显示用户信息
- ✅ 显示"普通用户"标识
- ✅ 看不到"用户"和"卡密"菜单

#### 3. 用户续费测试

**测试步骤**：
1. 使用普通用户账号登录
2. 在 Dashboard 点击"续费"按钮
3. 输入新的卡密
4. 点击"确认续费"

**预期结果**：
- ✅ 续费成功
- ✅ 到期时间延长
- ✅ 剩余时间更新

---

### 三、账号管理测试

#### 1. 添加账号测试

**测试步骤**：
1. 点击侧边栏"账号"菜单
2. 点击"添加账号"
3. 选择"扫码登录"或"手动输入"
4. 完成账号添加

**预期结果**：
- ✅ 账号添加成功
- ✅ 账号显示在列表中
- ✅ 可以启动/停止账号

#### 2. 账号启动测试

**测试步骤**：
1. 在账号列表中找到刚添加的账号
2. 点击启动按钮
3. 查看日志

**预期结果**：
- ✅ 账号启动成功
- ✅ 日志显示连接成功
- ✅ 状态变为"运行中"

---

### 四、偷菜过滤测试

#### 1. 植物过滤测试

**测试步骤**：
1. 进入"设置"页面
2. 选择已启动的账号
3. 找到"偷菜过滤设置"
4. 启用偷菜过滤
5. 选择模式：黑名单
6. 勾选几种植物（如：萝卜、白菜）
7. 保存设置

**预期结果**：
- ✅ 设置保存成功
- ✅ 偷菜时跳过选中的植物
- ✅ 日志显示过滤信息

#### 2. 好友过滤测试

**测试步骤**：
1. 先在"好友"页面加载好友列表
2. 进入"设置"页面
3. 启用好友过滤
4. 选择模式：白名单
5. 勾选几个好友
6. 保存设置

**预期结果**：
- ✅ 设置保存成功
- ✅ 只偷取选中的好友
- ✅ 日志显示过滤信息

---

### 五、权限控制测试

#### 1. 普通用户访问限制测试

**测试步骤**：
1. 使用普通用户账号登录
2. 尝试访问用户管理页面 URL：`/users`
3. 尝试访问卡密管理页面 URL：`/cards`

**预期结果**：
- ✅ 菜单中不显示这些项目
- ✅ 直接访问 URL 被拒绝或重定向

#### 2. 管理员权限测试

**测试步骤**：
1. 使用管理员账号登录
2. 访问所有菜单项
3. 尝试编辑其他用户的账号

**预期结果**：
- ✅ 可以看到所有菜单
- ✅ 可以管理所有用户
- ✅ 可以生成和管理卡密

---

### 六、界面 UI 测试

#### 1. 响应式布局测试

**测试步骤**：
1. 在不同尺寸的设备/浏览器窗口访问
2. 测试移动端视图（< 768px）
3. 测试平板视图（768px - 1024px）
4. 测试桌面视图（> 1024px）

**预期结果**：
- ✅ 各尺寸下布局正常
- ✅ 功能可用
- ✅ 无样式错乱

#### 2. 深色模式测试

**测试步骤**：
1. 点击侧边栏的主题切换按钮
2. 切换到深色模式
3. 访问所有页面

**预期结果**：
- ✅ 所有页面深色模式正常
- ✅ 文字清晰可读
- ✅ 对比度合适

#### 3. 组件交互测试

**测试步骤**：
1. 测试所有按钮的 hover 效果
2. 测试输入框的焦点状态
3. 测试弹窗的打开/关闭
4. 测试下拉菜单

**预期结果**：
- ✅ 所有交互效果正常
- ✅ 动画流畅
- ✅ 无卡顿

---

### 七、API 功能测试

#### 1. 用户管理 API 测试

使用 curl 或 Postman 测试：

```bash
# 获取用户列表（需要管理员 token）
curl -H "x-admin-token: YOUR_TOKEN" \
     http://localhost:3000/api/users

# 预期结果：返回用户列表 JSON
```

#### 2. 卡密管理 API 测试

```bash
# 生成卡密
curl -X POST \
     -H "x-admin-token: YOUR_TOKEN" \
     -H "Content-Type: application/json" \
     -d '{"description":"测试卡","type":"M","days":30,"count":1}' \
     http://localhost:3000/api/cards

# 预期结果：返回生成的卡密 JSON
```

#### 3. 登录 API 测试

```bash
# 用户登录
curl -X POST \
     -H "Content-Type: application/json" \
     -d '{"username":"testuser1","password":"test1234"}' \
     http://localhost:3000/api/login

# 预期结果：返回 token 和用户信息
```

---

### 八、性能测试

#### 1. 多账号并发测试

**测试步骤**：
1. 添加 5-10 个账号
2. 同时启动所有账号
3. 观察系统资源占用
4. 查看日志输出

**预期结果**：
- ✅ 所有账号正常运行
- ✅ CPU/内存占用合理
- ✅ 日志输出正常

#### 2. 长时间运行测试

**测试步骤**：
1. 启动账号运行 24 小时
2. 观察内存泄漏
3. 检查连接稳定性

**预期结果**：
- ✅ 无内存泄漏
- ✅ 连接稳定
- ✅ 功能正常

---

## 测试报告模板

### 测试概况
- 测试日期：YYYY-MM-DD
- 测试人员：XXX
- 测试环境：macOS/Windows/Linux
- 浏览器：Chrome/Firefox/Safari

### 测试结果

| 测试项 | 状态 | 备注 |
|--------|------|------|
| 登录功能 | ✅ 通过 / ❌ 失败 | 说明 |
| 多用户系统 | ✅ 通过 / ❌ 失败 | 说明 |
| 卡密管理 | ✅ 通过 / ❌ 失败 | 说明 |
| 偷菜过滤 | ✅ 通过 / ❌ 失败 | 说明 |
| 权限控制 | ✅ 通过 / ❌ 失败 | 说明 |
| UI 界面 | ✅ 通过 / ❌ 失败 | 说明 |
| API 功能 | ✅ 通过 / ❌ 失败 | 说明 |
| 性能 | ✅ 通过 / ❌ 失败 | 说明 |

### 问题列表

#### 问题 1
- **描述**：...
- **严重程度**：高/中/低
- **复现步骤**：...
- **预期结果**：...
- **实际结果**：...

#### 问题 2
...

### 建议和改进
1. ...
2. ...

---

## 快速测试清单

### 必测项目（核心功能）
- [ ] 管理员登录
- [ ] 修改密码
- [ ] 生成卡密
- [ ] 用户注册
- [ ] 添加账号
- [ ] 启动账号
- [ ] 偷菜过滤配置

### 选测项目（增强功能）
- [ ] 用户续费
- [ ] 好友过滤
- [ ] 深色模式
- [ ] 响应式布局
- [ ] API 调用

### 性能测试（可选）
- [ ] 多账号并发
- [ ] 长时间运行
- [ ] 压力测试

---

## 联系支持

测试过程中遇到问题，请提交到：
- GitHub Issues: https://github.com/Penty-d/qq-farm-bot-ui/issues
- 附上测试报告和问题描述
