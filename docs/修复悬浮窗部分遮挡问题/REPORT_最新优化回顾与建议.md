# 近期功能优化复查与建议报告

本报告就近期进行的一系列「悬浮提示气泡遮挡与UI层级截断优化」操作进行二次复验，并分析其潜在影响与后续高阶升级建议。

## 1. 刚刚实施的优化回顾
- **面板脱绑**：在全局玻璃面板（`.glass-panel`）中移除了 `contain: paint` 渲染边界限制；
- **废弃精简**：从 `BaseSwitch` 抽离并删除了原本遗留的多重冗余气泡结构，让文字直接展现；
- **方向重构**：将 `BaseTooltip` 改由「向右展出」调整为「向下展出并水平居中」。

## 2. 产生的积极影响
- 侧边容器或边缘地带的 Tooltip、下拉框终于能够跨越卡片的“绝对边框”任意显示而不遭到生硬的“剪切被遮”。
- 向下并居中的提示不仅摆脱了左右两侧碰壁的窘境，视觉感也比原先突兀的单边延展更加平摊与平衡。
- 极度庞杂的「自动化设置页」DOM 树显著变轻（移除了至少 18 个无用组件级的 `span` 气泡体）。

## 3. 潜在的隐患复核（请重点留意）
虽然目前表现令人满意且满足了初步需求，但也存在长周期的前段设计理论债：

### 3.1 容器圆角溢出风险 (Border Overflow)
**影响范围**：由于我们去除了 `contain: paint`（某种程度上起到 `overflow: hidden` 的包容效果），若后续我们在使用 `.glass-panel` 的地方，其子元素出现了贴近边缘且自身没有设置边框圆角的有色背景块（如高亮行、选中条），可能会导致其直角超出了面板原本定义的圆角（`.rounded-2xl`）从而“刺破”卡片边缘。
**预防手段**：以后若遇到内部底色突破圆角，可针对特定卡片内层单独复写 `overflow: hidden` 即可。

### 3.2 边缘碰撞仍然可能存在 (Viewport Collisions)
**影响范围**：目前的 Tooltip 气泡设定为绝对位置 `top-full left-1/2 -translate-x-1/2`。
- 如果触发图标在**页面最低端**触发，向下的气泡可能会被拉下屏幕视口底线之外（需滚动才能看清）。
- 气泡固定宽度 (`w-64`，大约 `256px`)；如果图标正好身处距浏览器超级贴左边缘仅存 20 像素的死角，向两边延伸各 128px 的居中气泡依然有一半在屏幕左外被吃掉。

## 4. 终极架构级优化建议 (Future Roadmap)

如果你希望整个体系彻底屏蔽这类的层叠（Z-index/溢出截断）与碰撞问题，未来有以下终极重构方向：

### 🏁 使用 Vue 3 的 `<Teleport to="body">` （针对遮挡的终极杀招）
未来开发任何形式的浮动卡（Tooltip，Dropdown，Dialog），如果担心卡片、容器的样式限制，最佳解法是利用 `Teleport`。它能将渲染 DOM 直接投射穿梭到根级 `<body>` 之下，享受浏览器第一级别的最高叠加自由，**免疫一切由于父级相对定位带来的污染与裁切**。

### 🎯 引入成熟的 Floating UI (动态定位引擎)
当前通过 CSS 解决属于“静态控制”。如果希望气泡具有**触顶反弹、左防碰壁、动态追随**的智能调整功能，极度建议导入轻量级的空间计算引擎（如之前流行的 Popper.js 现代版：**`@floating-ui/vue`**）。这会令悬浮交互如丝般顺滑并永远出现在可视区最佳空隙。
