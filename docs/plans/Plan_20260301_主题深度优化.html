<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>主题深度优化计划 - 动态沉浸式流动渐变</title>
    <style>
        :root {
            --bg-color: #0f172a;
            --panel-bg: #1e293b;
            --text-main: #f8fafc;
            --text-muted: #94a3b8;
            --primary: #3b82f6;
            --warning: #f59e0b;
            --success: #22c55e;
            --border-color: #334155;
        }

        body {
            font-family: 'Inter', -apple-system, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            line-height: 1.6;
            margin: 0;
            padding: 40px 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 50px;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(to right, #60a5fa, #a78bfa);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .section {
            background-color: var(--panel-bg);
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 30px;
            border: 1px solid var(--border-color);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }

        .section h2 {
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 15px;
            margin-top: 0;
            color: #e2e8f0;
        }

        .mermaid-container {
            background-color: rgba(255, 255, 255, 0.02);
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border: 1px dashed var(--border-color);
            display: flex;
            justify-content: center;
        }

        .code-block {
            background-color: #020617;
            padding: 15px;
            border-radius: 8px;
            font-family: monospace;
            color: #e2e8f0;
            overflow-x: auto;
            white-space: pre-wrap;
        }

        .impact-list {
            list-style: none;
            padding: 0;
        }

        .impact-list li {
            position: relative;
            padding-left: 25px;
            margin-bottom: 10px;
        }

        .impact-list li::before {
            content: "→";
            position: absolute;
            left: 0;
            color: var(--primary);
            font-weight: bold;
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
</head>

<body>
    <div class="container">
        <div class="header">
            <h1>主题深度优化方案 (动态流动网格渐变)</h1>
            <p>基于 CSS Variables 与 Mesh Gradients 的沉浸式氛围感主题重构</p>
        </div>

        <div class="section">
            <h2>一、设计思路与目标</h2>
            <p>保留系统默认的主题不变，仅对额外四个主题进行深度视觉升级。摒弃过去只有侧边栏变色的单调做法，引入“全界面联动颜色渐变”及“毛玻璃 (Glassmorphism)”效果。</p>
            <ul>
                <li><strong>全息赛博 (Cyber)</strong>: 蓝紫交织网格渐变，带霓虹发光投影，强烈赛博黑客风。</li>
                <li><strong>深海矩阵 (Ocean)</strong>: 深蓝到微青色的呼吸式柔和流动渐变，静谧深邃。</li>
                <li><strong>樱花粉黛 (Sakura)</strong>: 粉白渐变，轻盈柔和的极光背景 (Aurora Background)。</li>
                <li><strong>尊贵黯金 (Elegant)</strong>: 黑金网格交汇，低调奢华，配合环境光晕。</li>
            </ul>
        </div>

        <div class="section">
            <h2>二、系统架构图 (Architecture)</h2>
            <div class="mermaid-container">
                <div class="mermaid">
                    graph TD
                    A[Pinia 主题 Store] -->|提供 currentTheme 状态| B(Vue 根组件 App.vue)
                    B -->|绑定动态 HTML/Body Class| C{CSS Variables Registry}
                    C -->|注入核心调色| D[Mesh Gradient 动画背景层]
                    C -->|注入发光色| E[Glassmorphism 毛玻璃容器卡片]
                    C -->|注入发光色| F[按钮/文本霓虹光晕效果]

                    D --> G[复合沉浸式渲染]
                    E --> G
                    F --> G
                </div>
            </div>
            <p>我们将使用原生 CSS 动画驱动背景的流转变换，从而保证前端执行效率。</p>
        </div>

        <div class="section">
            <h2>三、数据与渲染流向 (Data Flow)</h2>
            <div class="mermaid-container">
                <div class="mermaid">
                    sequenceDiagram
                    participant User as 用户
                    participant Switcher as 主题切换逻辑
                    participant Store as Pinia/VueUse 状态
                    participant CSS as 全局 CSS 变量
                    participant Layer as 渲染视图层

                    User->>Switcher: 触发主题切换 (如: cyber)
                    Switcher->>Store: 更新状态，并设置 .theme-cyber 类
                    Store->>Store: 持久化保存到 localStorage
                    Store->>CSS: DOM Class更新，激活相关 CSS 变量
                    CSS-->>CSS: 计算 --bg-gradient, --glass-bg 等变量池
                    CSS->>Layer: 变量级联生效
                    Layer->>Layer: 1. 启动 `background-position` 动画<br>2. 应用组件级边界阴影<br>3. 面板透明色无缝衔接
                </div>
            </div>
            <p><strong>核心改造点：</strong>我们将需要从组件抽离具体的白底/灰底类名写法，引入 `background: rgba(var(--theme-card-bg), 0.7);
                backdrop-filter: blur(12px);` 统一形成高斯模糊层，以使得底部流动的渐变网格能够透视出来。</p>
        </div>

        <div class="section">
            <h2>四、影响面分析 (Impact Analysis)</h2>
            <ul class="impact-list">
                <li><strong>全局样式表 (assets/css 或 main.css)</strong>: 增加大量的 <code>:root.theme-xxx</code> 变量组，包含渐变色点、光晕色以支持
                    4 种新主题，以及对应的 <code>@keyframes</code> 网格动画。</li>
                <li><strong>根布局组件 (如 Layout.vue / App.vue)</strong>: 需要在主视图的最底层插入一个 <code>fixed</code>
                    定位的背景容器，专门用来承担渐变和动画渲染。</li>
                <li><strong>通用样式改写</strong>: 过去使用 Tailwind 直接写死背景色（如 <code>bg-white</code>,
                    <code>dark:bg-gray-800</code>）的核心容器（含侧边栏、主内容区面板），需要更换成透明卡片样式类（如
                    <code>glass-panel</code>）。考虑到范围较广，将针对主要界面的外围容器开刀。
                </li>
                <li><strong>性能防腐蚀 (Performance)</strong>: `backdrop-filter: blur` 对 GPU 压力较大，我们会优先只针对大块面板开启；流动光球的动画采用
                    CSS `transform` 或 `background-position`，避免过度触发回流。</li>
            </ul>
        </div>

        <div class="section">
            <h2>五、下一步执行步骤 (Next Actions)</h2>
            <ol>
                <li>首先建立统一的全局 <strong>CSS 变量中心</strong>，并加入“流动网格”和“毛玻璃”基础类定义。</li>
                <li>升级根布局，置入独立的<strong>底盘渲染特效层</strong>（Dynamic Background）。</li>
                <li>修改目前的前端主界面，清洗硬编码纯色背景，全面拥抱融合视图（Glassmorphism）。</li>
            </ol>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            mermaid.initialize({
                theme: 'dark',
                startOnLoad: true
            });
        });
    </script>
</body>

</html>